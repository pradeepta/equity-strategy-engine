# ============================================================================
# Broker Configuration
# ============================================================================

# Broker selection: 'tws' (default) or 'alpaca'
BROKER=tws

# Trading mode: 'true' for live paper trading, 'false' for dry-run (default)
LIVE=false

# ============================================================================
# Interactive Brokers TWS Configuration (Default)
# ============================================================================

# TWS/IB Gateway host (default: 127.0.0.1)
TWS_HOST=127.0.0.1

# TWS/IB Gateway port
# 7497 = Paper Trading (default)
# 7496 = Live Trading
TWS_PORT=7497

# TWS client ID (default: 0)
# Use different IDs if running multiple connections
TWS_CLIENT_ID=0

# TWS account ID for portfolio fetching (paper trading account)
# Find this in TWS account window (e.g., DU9999999 for paper)
TWS_ACCOUNT_ID=DU9999999

# ============================================================================
# Alpaca Configuration (Alternative Broker)
# ============================================================================

# Alpaca API credentials
# Get your API keys from: https://app.alpaca.markets/paper/dashboard/overview
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_API_SECRET=your_alpaca_api_secret_here

# Alternative naming convention (both supported)
# APCA_API_KEY_ID=your_alpaca_api_key_here
# APCA_API_SECRET_KEY=your_alpaca_api_secret_here

# Alpaca base URL (optional)
# Default: https://paper-api.alpaca.markets
# ALPACA_BASE_URL=https://paper-api.alpaca.markets
# APCA_API_BASE_URL=https://paper-api.alpaca.markets

# ============================================================================
# Database Configuration (PostgreSQL + Prisma)
# ============================================================================

# PostgreSQL connection string
# Format: postgresql://[user[:password]@][host][:port]/database[?schema=public]
DATABASE_URL="postgresql://pradeeptadash@localhost:5432/trading_db?schema=public"

# Database pool settings
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT_MS=5000

# User ID for strategy management
# Used by the orchestrator to query and manage strategies
USER_ID=default-user

# ============================================================================
# Multi-Strategy Configuration
# ============================================================================

# WebSocket evaluation endpoint (stub for now, will integrate with Claude MCP later)
STRATEGY_EVAL_WS_ENDPOINT=ws://localhost:8080/evaluate
STRATEGY_EVAL_ENABLED=true

# Multi-strategy settings
MAX_CONCURRENT_STRATEGIES=10
STRATEGY_WATCH_INTERVAL_MS=30000


# ============================================================================
# Risk Controls / Safety
# ============================================================================

# Global kill switch for live order submissions
ALLOW_LIVE_ORDERS=true

# Allow cancel_entries actions from strategy engine (default false)
ALLOW_CANCEL_ENTRIES=false

# Max orders per symbol (optional)
# MAX_ORDERS_PER_SYMBOL=2

# Max order quantity (optional)
# MAX_ORDER_QTY=100

# Max notional per symbol (optional)
# MAX_NOTIONAL_PER_SYMBOL=100000

# Daily loss limit (optional)
# DAILY_LOSS_LIMIT=500

# ============================================================================
# Usage Examples
# ============================================================================

# Strategy Management (CLI):
#   npm run strategy:add -- --user=user123 --file=./aapl-momentum.yaml
#   npm run strategy:list -- --user=user123 --status=ACTIVE
#   npm run strategy:close -- --id=clfx123 --reason="Market conditions"
#   npm run strategy:rollback -- --id=clfx123 --version=3
#   npm run strategy:export -- --id=clfx123 --output=./backup.yaml

# Multi-strategy orchestrator (database-backed):
#   npm run live:multi

# Dry-run with TWS (no orders submitted):
#   npm run live

# Live paper trading with TWS:
#   LIVE=true npm run live:multi

# Use Alpaca instead:
#   BROKER=alpaca npm run live:multi

# Live paper trading with Alpaca:
#   BROKER=alpaca LIVE=true npm run live:multi
